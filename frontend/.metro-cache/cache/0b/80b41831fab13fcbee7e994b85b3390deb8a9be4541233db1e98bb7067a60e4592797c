{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":45,"index":103}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":56,"index":160}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"../utils/cartEvents","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":194},"end":{"line":5,"column":49,"index":243}}],"key":"bToJ8lolBED+L1PdmHqEJjPllOs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useCart\", {\n    enumerable: true,\n    get: function () {\n      return useCart;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoRouter = require(_dependencyMap[1], \"expo-router\");\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _utilsCartEvents = require(_dependencyMap[3], \"../utils/cartEvents\");\n  const useCart = () => {\n    _s();\n    const [cart, setCart] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(false);\n    const [cartItemCount, setCartItemCount] = (0, _react.useState)(0);\n    const loadCart = (0, _react.useCallback)(async () => {\n      if (!(0, _servicesApi.getAuthToken)()) {\n        setCart(null);\n        setCartItemCount(0);\n        return;\n      }\n      try {\n        setLoading(true);\n        const cartData = await _servicesApi.cartAPI.get();\n        setCart(cartData);\n        if (cartData && cartData.items) {\n          const totalItems = cartData.items.reduce((sum, item) => sum + item.quantity, 0);\n          setCartItemCount(totalItems);\n        } else {\n          setCartItemCount(0);\n        }\n      } catch (error) {\n        console.error('Error loading cart:', error);\n        setCart(null);\n        setCartItemCount(0);\n      } finally {\n        setLoading(false);\n      }\n    }, []);\n\n    // Reload cart when screen comes into focus\n    (0, _expoRouter.useFocusEffect)((0, _react.useCallback)(() => {\n      loadCart();\n    }, [loadCart]));\n\n    // Listen to cart update events for real-time updates\n    (0, _react.useEffect)(() => {\n      const unsubscribe = _utilsCartEvents.cartEvents.subscribe(() => {\n        loadCart();\n      });\n      return unsubscribe;\n    }, [loadCart]);\n    const addToCart = async (medicineId, quantity = 1) => {\n      try {\n        await _servicesApi.cartAPI.add(medicineId, quantity);\n        await loadCart();\n        return true;\n      } catch (error) {\n        console.error('Error adding to cart:', error);\n        throw error;\n      }\n    };\n    const updateQuantity = async (medicineId, quantity) => {\n      try {\n        await _servicesApi.cartAPI.update(medicineId, quantity);\n        await loadCart();\n        return true;\n      } catch (error) {\n        console.error('Error updating quantity:', error);\n        throw error;\n      }\n    };\n    const removeFromCart = async medicineId => {\n      try {\n        await _servicesApi.cartAPI.remove(medicineId);\n        await loadCart();\n        return true;\n      } catch (error) {\n        console.error('Error removing from cart:', error);\n        throw error;\n      }\n    };\n    const getItemQuantity = medicineId => {\n      if (!cart || !cart.items) return 0;\n      const item = cart.items.find(item => item.medicine_id === medicineId);\n      return item ? item.quantity : 0;\n    };\n    (0, _react.useEffect)(() => {\n      loadCart();\n    }, [loadCart]);\n    return {\n      cart,\n      loading,\n      cartItemCount,\n      loadCart,\n      addToCart,\n      updateQuantity,\n      removeFromCart,\n      getItemQuantity\n    };\n  };\n  _s(useCart, \"tIi5qggSglR4x8bAEtYuYPX3pBQ=\", false, function () {\n    return [_expoRouter.useFocusEffect];\n  });\n});","lineCount":112,"map":[[8,2,7,0,"Object"],[8,8,7,0],[8,9,7,0,"defineProperty"],[8,23,7,0],[8,24,7,0,"exports"],[8,31,7,0],[9,4,7,0,"enumerable"],[9,14,7,0],[10,4,7,0,"get"],[10,7,7,0],[10,18,7,0,"get"],[10,19,7,0],[11,6,7,0],[11,13,7,0,"useCart"],[11,20,7,0],[12,4,7,0],[13,2,7,0],[14,2,1,0],[14,6,1,0,"_react"],[14,12,1,0],[14,15,1,0,"require"],[14,22,1,0],[14,23,1,0,"_dependencyMap"],[14,37,1,0],[15,2,2,0],[15,6,2,0,"_expoRouter"],[15,17,2,0],[15,20,2,0,"require"],[15,27,2,0],[15,28,2,0,"_dependencyMap"],[15,42,2,0],[16,2,3,0],[16,6,3,0,"_servicesApi"],[16,18,3,0],[16,21,3,0,"require"],[16,28,3,0],[16,29,3,0,"_dependencyMap"],[16,43,3,0],[17,2,5,0],[17,6,5,0,"_utilsCartEvents"],[17,22,5,0],[17,25,5,0,"require"],[17,32,5,0],[17,33,5,0,"_dependencyMap"],[17,47,5,0],[18,2,7,7],[18,8,7,13,"useCart"],[18,15,7,20],[18,18,7,23,"useCart"],[18,19,7,23],[18,24,7,29],[19,4,7,29,"_s"],[19,6,7,29],[20,4,8,2],[20,10,8,8],[20,11,8,9,"cart"],[20,15,8,13],[20,17,8,15,"setCart"],[20,24,8,22],[20,25,8,23],[20,28,8,26],[20,32,8,26,"useState"],[20,38,8,34],[20,39,8,34,"useState"],[20,47,8,34],[20,49,8,48],[20,53,8,52],[20,54,8,53],[21,4,9,2],[21,10,9,8],[21,11,9,9,"loading"],[21,18,9,16],[21,20,9,18,"setLoading"],[21,30,9,28],[21,31,9,29],[21,34,9,32],[21,38,9,32,"useState"],[21,44,9,40],[21,45,9,40,"useState"],[21,53,9,40],[21,55,9,41],[21,60,9,46],[21,61,9,47],[22,4,10,2],[22,10,10,8],[22,11,10,9,"cartItemCount"],[22,24,10,22],[22,26,10,24,"setCartItemCount"],[22,42,10,40],[22,43,10,41],[22,46,10,44],[22,50,10,44,"useState"],[22,56,10,52],[22,57,10,52,"useState"],[22,65,10,52],[22,67,10,53],[22,68,10,54],[22,69,10,55],[23,4,12,2],[23,10,12,8,"loadCart"],[23,18,12,16],[23,21,12,19],[23,25,12,19,"useCallback"],[23,31,12,30],[23,32,12,30,"useCallback"],[23,43,12,30],[23,45,12,31],[23,57,12,43],[24,6,13,4],[24,10,13,8],[24,11,13,9],[24,15,13,9,"getAuthToken"],[24,27,13,21],[24,28,13,21,"getAuthToken"],[24,40,13,21],[24,42,13,22],[24,43,13,23],[24,45,13,25],[25,8,14,6,"setCart"],[25,15,14,13],[25,16,14,14],[25,20,14,18],[25,21,14,19],[26,8,15,6,"setCartItemCount"],[26,24,15,22],[26,25,15,23],[26,26,15,24],[26,27,15,25],[27,8,16,6],[28,6,17,4],[29,6,19,4],[29,10,19,8],[30,8,20,6,"setLoading"],[30,18,20,16],[30,19,20,17],[30,23,20,21],[30,24,20,22],[31,8,21,6],[31,14,21,12,"cartData"],[31,22,21,20],[31,25,21,23],[31,31,21,29,"cartAPI"],[31,43,21,36],[31,44,21,36,"cartAPI"],[31,51,21,36],[31,52,21,37,"get"],[31,55,21,40],[31,56,21,41],[31,57,21,42],[32,8,22,6,"setCart"],[32,15,22,13],[32,16,22,14,"cartData"],[32,24,22,22],[32,25,22,23],[33,8,24,6],[33,12,24,10,"cartData"],[33,20,24,18],[33,24,24,22,"cartData"],[33,32,24,30],[33,33,24,31,"items"],[33,38,24,36],[33,40,24,38],[34,10,25,8],[34,16,25,14,"totalItems"],[34,26,25,24],[34,29,25,27,"cartData"],[34,37,25,35],[34,38,25,36,"items"],[34,43,25,41],[34,44,25,42,"reduce"],[34,50,25,48],[34,51,25,49],[34,52,25,50,"sum"],[34,55,25,53],[34,57,25,55,"item"],[34,61,25,59],[34,66,25,64,"sum"],[34,69,25,67],[34,72,25,70,"item"],[34,76,25,74],[34,77,25,75,"quantity"],[34,85,25,83],[34,87,25,85],[34,88,25,86],[34,89,25,87],[35,10,26,8,"setCartItemCount"],[35,26,26,24],[35,27,26,25,"totalItems"],[35,37,26,35],[35,38,26,36],[36,8,27,6],[36,9,27,7],[36,15,27,13],[37,10,28,8,"setCartItemCount"],[37,26,28,24],[37,27,28,25],[37,28,28,26],[37,29,28,27],[38,8,29,6],[39,6,30,4],[39,7,30,5],[39,8,30,6],[39,15,30,13,"error"],[39,20,30,18],[39,22,30,20],[40,8,31,6,"console"],[40,15,31,13],[40,16,31,14,"error"],[40,21,31,19],[40,22,31,20],[40,43,31,41],[40,45,31,43,"error"],[40,50,31,48],[40,51,31,49],[41,8,32,6,"setCart"],[41,15,32,13],[41,16,32,14],[41,20,32,18],[41,21,32,19],[42,8,33,6,"setCartItemCount"],[42,24,33,22],[42,25,33,23],[42,26,33,24],[42,27,33,25],[43,6,34,4],[43,7,34,5],[43,16,34,14],[44,8,35,6,"setLoading"],[44,18,35,16],[44,19,35,17],[44,24,35,22],[44,25,35,23],[45,6,36,4],[46,4,37,2],[46,5,37,3],[46,7,37,5],[46,9,37,7],[46,10,37,8],[48,4,39,2],[49,4,40,2],[49,8,40,2,"useFocusEffect"],[49,19,40,16],[49,20,40,16,"useFocusEffect"],[49,34,40,16],[49,36,41,4],[49,40,41,4,"useCallback"],[49,46,41,15],[49,47,41,15,"useCallback"],[49,58,41,15],[49,60,41,16],[49,66,41,22],[50,6,42,6,"loadCart"],[50,14,42,14],[50,15,42,15],[50,16,42,16],[51,4,43,4],[51,5,43,5],[51,7,43,7],[51,8,43,8,"loadCart"],[51,16,43,16],[51,17,43,17],[51,18,44,2],[51,19,44,3],[53,4,46,2],[54,4,47,2],[54,8,47,2,"useEffect"],[54,14,47,11],[54,15,47,11,"useEffect"],[54,24,47,11],[54,26,47,12],[54,32,47,18],[55,6,48,4],[55,12,48,10,"unsubscribe"],[55,23,48,21],[55,26,48,24,"cartEvents"],[55,42,48,34],[55,43,48,34,"cartEvents"],[55,53,48,34],[55,54,48,35,"subscribe"],[55,63,48,44],[55,64,48,45],[55,70,48,51],[56,8,49,6,"loadCart"],[56,16,49,14],[56,17,49,15],[56,18,49,16],[57,6,50,4],[57,7,50,5],[57,8,50,6],[58,6,51,4],[58,13,51,11,"unsubscribe"],[58,24,51,22],[59,4,52,2],[59,5,52,3],[59,7,52,5],[59,8,52,6,"loadCart"],[59,16,52,14],[59,17,52,15],[59,18,52,16],[60,4,54,2],[60,10,54,8,"addToCart"],[60,19,54,17],[60,22,54,20],[60,28,54,20,"addToCart"],[60,29,54,27,"medicineId"],[60,39,54,45],[60,41,54,47,"quantity"],[60,49,54,63],[60,52,54,66],[60,53,54,67],[60,58,54,72],[61,6,55,4],[61,10,55,8],[62,8,56,6],[62,14,56,12,"cartAPI"],[62,26,56,19],[62,27,56,19,"cartAPI"],[62,34,56,19],[62,35,56,20,"add"],[62,38,56,23],[62,39,56,24,"medicineId"],[62,49,56,34],[62,51,56,36,"quantity"],[62,59,56,44],[62,60,56,45],[63,8,57,6],[63,14,57,12,"loadCart"],[63,22,57,20],[63,23,57,21],[63,24,57,22],[64,8,58,6],[64,15,58,13],[64,19,58,17],[65,6,59,4],[65,7,59,5],[65,8,59,6],[65,15,59,13,"error"],[65,20,59,23],[65,22,59,25],[66,8,60,6,"console"],[66,15,60,13],[66,16,60,14,"error"],[66,21,60,19],[66,22,60,20],[66,45,60,43],[66,47,60,45,"error"],[66,52,60,50],[66,53,60,51],[67,8,61,6],[67,14,61,12,"error"],[67,19,61,17],[68,6,62,4],[69,4,63,2],[69,5,63,3],[70,4,65,2],[70,10,65,8,"updateQuantity"],[70,24,65,22],[70,27,65,25],[70,33,65,25,"updateQuantity"],[70,34,65,32,"medicineId"],[70,44,65,50],[70,46,65,52,"quantity"],[70,54,65,68],[70,59,65,73],[71,6,66,4],[71,10,66,8],[72,8,67,6],[72,14,67,12,"cartAPI"],[72,26,67,19],[72,27,67,19,"cartAPI"],[72,34,67,19],[72,35,67,20,"update"],[72,41,67,26],[72,42,67,27,"medicineId"],[72,52,67,37],[72,54,67,39,"quantity"],[72,62,67,47],[72,63,67,48],[73,8,68,6],[73,14,68,12,"loadCart"],[73,22,68,20],[73,23,68,21],[73,24,68,22],[74,8,69,6],[74,15,69,13],[74,19,69,17],[75,6,70,4],[75,7,70,5],[75,8,70,6],[75,15,70,13,"error"],[75,20,70,23],[75,22,70,25],[76,8,71,6,"console"],[76,15,71,13],[76,16,71,14,"error"],[76,21,71,19],[76,22,71,20],[76,48,71,46],[76,50,71,48,"error"],[76,55,71,53],[76,56,71,54],[77,8,72,6],[77,14,72,12,"error"],[77,19,72,17],[78,6,73,4],[79,4,74,2],[79,5,74,3],[80,4,76,2],[80,10,76,8,"removeFromCart"],[80,24,76,22],[80,27,76,25],[80,33,76,32,"medicineId"],[80,43,76,50],[80,47,76,55],[81,6,77,4],[81,10,77,8],[82,8,78,6],[82,14,78,12,"cartAPI"],[82,26,78,19],[82,27,78,19,"cartAPI"],[82,34,78,19],[82,35,78,20,"remove"],[82,41,78,26],[82,42,78,27,"medicineId"],[82,52,78,37],[82,53,78,38],[83,8,79,6],[83,14,79,12,"loadCart"],[83,22,79,20],[83,23,79,21],[83,24,79,22],[84,8,80,6],[84,15,80,13],[84,19,80,17],[85,6,81,4],[85,7,81,5],[85,8,81,6],[85,15,81,13,"error"],[85,20,81,23],[85,22,81,25],[86,8,82,6,"console"],[86,15,82,13],[86,16,82,14,"error"],[86,21,82,19],[86,22,82,20],[86,49,82,47],[86,51,82,49,"error"],[86,56,82,54],[86,57,82,55],[87,8,83,6],[87,14,83,12,"error"],[87,19,83,17],[88,6,84,4],[89,4,85,2],[89,5,85,3],[90,4,87,2],[90,10,87,8,"getItemQuantity"],[90,25,87,23],[90,28,87,27,"medicineId"],[90,38,87,45],[90,42,87,58],[91,6,88,4],[91,10,88,8],[91,11,88,9,"cart"],[91,15,88,13],[91,19,88,17],[91,20,88,18,"cart"],[91,24,88,22],[91,25,88,23,"items"],[91,30,88,28],[91,32,88,30],[91,39,88,37],[91,40,88,38],[92,6,89,4],[92,12,89,10,"item"],[92,16,89,14],[92,19,89,17,"cart"],[92,23,89,21],[92,24,89,22,"items"],[92,29,89,27],[92,30,89,28,"find"],[92,34,89,32],[92,35,89,33,"item"],[92,39,89,37],[92,43,89,41,"item"],[92,47,89,45],[92,48,89,46,"medicine_id"],[92,59,89,57],[92,64,89,62,"medicineId"],[92,74,89,72],[92,75,89,73],[93,6,90,4],[93,13,90,11,"item"],[93,17,90,15],[93,20,90,18,"item"],[93,24,90,22],[93,25,90,23,"quantity"],[93,33,90,31],[93,36,90,34],[93,37,90,35],[94,4,91,2],[94,5,91,3],[95,4,93,2],[95,8,93,2,"useEffect"],[95,14,93,11],[95,15,93,11,"useEffect"],[95,24,93,11],[95,26,93,12],[95,32,93,18],[96,6,94,4,"loadCart"],[96,14,94,12],[96,15,94,13],[96,16,94,14],[97,4,95,2],[97,5,95,3],[97,7,95,5],[97,8,95,6,"loadCart"],[97,16,95,14],[97,17,95,15],[97,18,95,16],[98,4,97,2],[98,11,97,9],[99,6,98,4,"cart"],[99,10,98,8],[100,6,99,4,"loading"],[100,13,99,11],[101,6,100,4,"cartItemCount"],[101,19,100,17],[102,6,101,4,"loadCart"],[102,14,101,12],[103,6,102,4,"addToCart"],[103,15,102,13],[104,6,103,4,"updateQuantity"],[104,20,103,18],[105,6,104,4,"removeFromCart"],[105,20,104,18],[106,6,105,4,"getItemQuantity"],[107,4,106,2],[107,5,106,3],[108,2,107,0],[108,3,107,1],[109,2,107,2,"_s"],[109,4,107,2],[109,5,7,13,"useCart"],[109,12,7,20],[110,4,7,20],[110,12,40,2,"useFocusEffect"],[110,23,40,16],[110,24,40,16,"useFocusEffect"],[110,38,40,16],[111,2,40,16],[112,0,40,16],[112,3]],"functionMap":{"names":["<global>","useCart","loadCart","cartData.items.reduce$argument_0","useFocusEffect$argument_0","useEffect$argument_0","cartEvents.subscribe$argument_0","addToCart","updateQuantity","removeFromCart","getItemQuantity","cart.items.find$argument_0"],"mappings":"AAA;uBCM;+BCK;iDCa,kCD;GDY;gBGI;KHE;YII;6CCC;KDE;GJE;oBME;GNS;yBOE;GPS;yBQE;GRS;0BSE;iCCE,uCD;GTE;YIE;GJE;CDY"},"hasCjsExports":false},"type":"js/module"}]}
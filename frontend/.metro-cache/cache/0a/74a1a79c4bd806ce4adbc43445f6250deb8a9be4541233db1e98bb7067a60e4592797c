{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":45,"index":103}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":56,"index":160}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"../utils/cartEvents","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":194},"end":{"line":5,"column":49,"index":243}}],"key":"bToJ8lolBED+L1PdmHqEJjPllOs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useCart\", {\n    enumerable: true,\n    get: function () {\n      return useCart;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoRouter = require(_dependencyMap[1], \"expo-router\");\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _utilsCartEvents = require(_dependencyMap[3], \"../utils/cartEvents\");\n  const useCart = () => {\n    const [cart, setCart] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(false);\n    const [cartItemCount, setCartItemCount] = (0, _react.useState)(0);\n    const loadCart = (0, _react.useCallback)(async () => {\n      if (!(0, _servicesApi.getAuthToken)()) {\n        setCart(null);\n        setCartItemCount(0);\n        return;\n      }\n      try {\n        setLoading(true);\n        const cartData = await _servicesApi.cartAPI.get();\n        setCart(cartData);\n        if (cartData && cartData.items) {\n          const totalItems = cartData.items.reduce((sum, item) => sum + item.quantity, 0);\n          setCartItemCount(totalItems);\n        } else {\n          setCartItemCount(0);\n        }\n      } catch (error) {\n        console.error('Error loading cart:', error);\n        setCart(null);\n        setCartItemCount(0);\n      } finally {\n        setLoading(false);\n      }\n    }, []);\n\n    // Reload cart when screen comes into focus\n    (0, _expoRouter.useFocusEffect)((0, _react.useCallback)(() => {\n      loadCart();\n    }, [loadCart]));\n\n    // Listen to cart update events for real-time updates\n    (0, _react.useEffect)(() => {\n      const unsubscribe = _utilsCartEvents.cartEvents.subscribe(() => {\n        loadCart();\n      });\n      return unsubscribe;\n    }, [loadCart]);\n    const addToCart = async (medicineId, quantity = 1) => {\n      try {\n        await _servicesApi.cartAPI.add(medicineId, quantity);\n        await loadCart();\n        return true;\n      } catch (error) {\n        console.error('Error adding to cart:', error);\n        throw error;\n      }\n    };\n    const updateQuantity = async (medicineId, quantity) => {\n      try {\n        await _servicesApi.cartAPI.update(medicineId, quantity);\n        await loadCart();\n        return true;\n      } catch (error) {\n        console.error('Error updating quantity:', error);\n        throw error;\n      }\n    };\n    const removeFromCart = async medicineId => {\n      try {\n        await _servicesApi.cartAPI.remove(medicineId);\n        await loadCart();\n        return true;\n      } catch (error) {\n        console.error('Error removing from cart:', error);\n        throw error;\n      }\n    };\n    const getItemQuantity = medicineId => {\n      if (!cart || !cart.items) return 0;\n      const item = cart.items.find(item => item.medicine_id === medicineId);\n      return item ? item.quantity : 0;\n    };\n    (0, _react.useEffect)(() => {\n      loadCart();\n    }, [loadCart]);\n    return {\n      cart,\n      loading,\n      cartItemCount,\n      loadCart,\n      addToCart,\n      updateQuantity,\n      removeFromCart,\n      getItemQuantity\n    };\n  };\n});","lineCount":107,"map":[[7,2,7,0,"Object"],[7,8,7,0],[7,9,7,0,"defineProperty"],[7,23,7,0],[7,24,7,0,"exports"],[7,31,7,0],[8,4,7,0,"enumerable"],[8,14,7,0],[9,4,7,0,"get"],[9,7,7,0],[9,18,7,0,"get"],[9,19,7,0],[10,6,7,0],[10,13,7,0,"useCart"],[10,20,7,0],[11,4,7,0],[12,2,7,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,2,0],[14,6,2,0,"_expoRouter"],[14,17,2,0],[14,20,2,0,"require"],[14,27,2,0],[14,28,2,0,"_dependencyMap"],[14,42,2,0],[15,2,3,0],[15,6,3,0,"_servicesApi"],[15,18,3,0],[15,21,3,0,"require"],[15,28,3,0],[15,29,3,0,"_dependencyMap"],[15,43,3,0],[16,2,5,0],[16,6,5,0,"_utilsCartEvents"],[16,22,5,0],[16,25,5,0,"require"],[16,32,5,0],[16,33,5,0,"_dependencyMap"],[16,47,5,0],[17,2,7,7],[17,8,7,13,"useCart"],[17,15,7,20],[17,18,7,23,"useCart"],[17,19,7,23],[17,24,7,29],[18,4,8,2],[18,10,8,8],[18,11,8,9,"cart"],[18,15,8,13],[18,17,8,15,"setCart"],[18,24,8,22],[18,25,8,23],[18,28,8,26],[18,32,8,26,"useState"],[18,38,8,34],[18,39,8,34,"useState"],[18,47,8,34],[18,49,8,48],[18,53,8,52],[18,54,8,53],[19,4,9,2],[19,10,9,8],[19,11,9,9,"loading"],[19,18,9,16],[19,20,9,18,"setLoading"],[19,30,9,28],[19,31,9,29],[19,34,9,32],[19,38,9,32,"useState"],[19,44,9,40],[19,45,9,40,"useState"],[19,53,9,40],[19,55,9,41],[19,60,9,46],[19,61,9,47],[20,4,10,2],[20,10,10,8],[20,11,10,9,"cartItemCount"],[20,24,10,22],[20,26,10,24,"setCartItemCount"],[20,42,10,40],[20,43,10,41],[20,46,10,44],[20,50,10,44,"useState"],[20,56,10,52],[20,57,10,52,"useState"],[20,65,10,52],[20,67,10,53],[20,68,10,54],[20,69,10,55],[21,4,12,2],[21,10,12,8,"loadCart"],[21,18,12,16],[21,21,12,19],[21,25,12,19,"useCallback"],[21,31,12,30],[21,32,12,30,"useCallback"],[21,43,12,30],[21,45,12,31],[21,57,12,43],[22,6,13,4],[22,10,13,8],[22,11,13,9],[22,15,13,9,"getAuthToken"],[22,27,13,21],[22,28,13,21,"getAuthToken"],[22,40,13,21],[22,42,13,22],[22,43,13,23],[22,45,13,25],[23,8,14,6,"setCart"],[23,15,14,13],[23,16,14,14],[23,20,14,18],[23,21,14,19],[24,8,15,6,"setCartItemCount"],[24,24,15,22],[24,25,15,23],[24,26,15,24],[24,27,15,25],[25,8,16,6],[26,6,17,4],[27,6,19,4],[27,10,19,8],[28,8,20,6,"setLoading"],[28,18,20,16],[28,19,20,17],[28,23,20,21],[28,24,20,22],[29,8,21,6],[29,14,21,12,"cartData"],[29,22,21,20],[29,25,21,23],[29,31,21,29,"cartAPI"],[29,43,21,36],[29,44,21,36,"cartAPI"],[29,51,21,36],[29,52,21,37,"get"],[29,55,21,40],[29,56,21,41],[29,57,21,42],[30,8,22,6,"setCart"],[30,15,22,13],[30,16,22,14,"cartData"],[30,24,22,22],[30,25,22,23],[31,8,24,6],[31,12,24,10,"cartData"],[31,20,24,18],[31,24,24,22,"cartData"],[31,32,24,30],[31,33,24,31,"items"],[31,38,24,36],[31,40,24,38],[32,10,25,8],[32,16,25,14,"totalItems"],[32,26,25,24],[32,29,25,27,"cartData"],[32,37,25,35],[32,38,25,36,"items"],[32,43,25,41],[32,44,25,42,"reduce"],[32,50,25,48],[32,51,25,49],[32,52,25,50,"sum"],[32,55,25,53],[32,57,25,55,"item"],[32,61,25,59],[32,66,25,64,"sum"],[32,69,25,67],[32,72,25,70,"item"],[32,76,25,74],[32,77,25,75,"quantity"],[32,85,25,83],[32,87,25,85],[32,88,25,86],[32,89,25,87],[33,10,26,8,"setCartItemCount"],[33,26,26,24],[33,27,26,25,"totalItems"],[33,37,26,35],[33,38,26,36],[34,8,27,6],[34,9,27,7],[34,15,27,13],[35,10,28,8,"setCartItemCount"],[35,26,28,24],[35,27,28,25],[35,28,28,26],[35,29,28,27],[36,8,29,6],[37,6,30,4],[37,7,30,5],[37,8,30,6],[37,15,30,13,"error"],[37,20,30,18],[37,22,30,20],[38,8,31,6,"console"],[38,15,31,13],[38,16,31,14,"error"],[38,21,31,19],[38,22,31,20],[38,43,31,41],[38,45,31,43,"error"],[38,50,31,48],[38,51,31,49],[39,8,32,6,"setCart"],[39,15,32,13],[39,16,32,14],[39,20,32,18],[39,21,32,19],[40,8,33,6,"setCartItemCount"],[40,24,33,22],[40,25,33,23],[40,26,33,24],[40,27,33,25],[41,6,34,4],[41,7,34,5],[41,16,34,14],[42,8,35,6,"setLoading"],[42,18,35,16],[42,19,35,17],[42,24,35,22],[42,25,35,23],[43,6,36,4],[44,4,37,2],[44,5,37,3],[44,7,37,5],[44,9,37,7],[44,10,37,8],[46,4,39,2],[47,4,40,2],[47,8,40,2,"useFocusEffect"],[47,19,40,16],[47,20,40,16,"useFocusEffect"],[47,34,40,16],[47,36,41,4],[47,40,41,4,"useCallback"],[47,46,41,15],[47,47,41,15,"useCallback"],[47,58,41,15],[47,60,41,16],[47,66,41,22],[48,6,42,6,"loadCart"],[48,14,42,14],[48,15,42,15],[48,16,42,16],[49,4,43,4],[49,5,43,5],[49,7,43,7],[49,8,43,8,"loadCart"],[49,16,43,16],[49,17,43,17],[49,18,44,2],[49,19,44,3],[51,4,46,2],[52,4,47,2],[52,8,47,2,"useEffect"],[52,14,47,11],[52,15,47,11,"useEffect"],[52,24,47,11],[52,26,47,12],[52,32,47,18],[53,6,48,4],[53,12,48,10,"unsubscribe"],[53,23,48,21],[53,26,48,24,"cartEvents"],[53,42,48,34],[53,43,48,34,"cartEvents"],[53,53,48,34],[53,54,48,35,"subscribe"],[53,63,48,44],[53,64,48,45],[53,70,48,51],[54,8,49,6,"loadCart"],[54,16,49,14],[54,17,49,15],[54,18,49,16],[55,6,50,4],[55,7,50,5],[55,8,50,6],[56,6,51,4],[56,13,51,11,"unsubscribe"],[56,24,51,22],[57,4,52,2],[57,5,52,3],[57,7,52,5],[57,8,52,6,"loadCart"],[57,16,52,14],[57,17,52,15],[57,18,52,16],[58,4,54,2],[58,10,54,8,"addToCart"],[58,19,54,17],[58,22,54,20],[58,28,54,20,"addToCart"],[58,29,54,27,"medicineId"],[58,39,54,45],[58,41,54,47,"quantity"],[58,49,54,63],[58,52,54,66],[58,53,54,67],[58,58,54,72],[59,6,55,4],[59,10,55,8],[60,8,56,6],[60,14,56,12,"cartAPI"],[60,26,56,19],[60,27,56,19,"cartAPI"],[60,34,56,19],[60,35,56,20,"add"],[60,38,56,23],[60,39,56,24,"medicineId"],[60,49,56,34],[60,51,56,36,"quantity"],[60,59,56,44],[60,60,56,45],[61,8,57,6],[61,14,57,12,"loadCart"],[61,22,57,20],[61,23,57,21],[61,24,57,22],[62,8,58,6],[62,15,58,13],[62,19,58,17],[63,6,59,4],[63,7,59,5],[63,8,59,6],[63,15,59,13,"error"],[63,20,59,23],[63,22,59,25],[64,8,60,6,"console"],[64,15,60,13],[64,16,60,14,"error"],[64,21,60,19],[64,22,60,20],[64,45,60,43],[64,47,60,45,"error"],[64,52,60,50],[64,53,60,51],[65,8,61,6],[65,14,61,12,"error"],[65,19,61,17],[66,6,62,4],[67,4,63,2],[67,5,63,3],[68,4,65,2],[68,10,65,8,"updateQuantity"],[68,24,65,22],[68,27,65,25],[68,33,65,25,"updateQuantity"],[68,34,65,32,"medicineId"],[68,44,65,50],[68,46,65,52,"quantity"],[68,54,65,68],[68,59,65,73],[69,6,66,4],[69,10,66,8],[70,8,67,6],[70,14,67,12,"cartAPI"],[70,26,67,19],[70,27,67,19,"cartAPI"],[70,34,67,19],[70,35,67,20,"update"],[70,41,67,26],[70,42,67,27,"medicineId"],[70,52,67,37],[70,54,67,39,"quantity"],[70,62,67,47],[70,63,67,48],[71,8,68,6],[71,14,68,12,"loadCart"],[71,22,68,20],[71,23,68,21],[71,24,68,22],[72,8,69,6],[72,15,69,13],[72,19,69,17],[73,6,70,4],[73,7,70,5],[73,8,70,6],[73,15,70,13,"error"],[73,20,70,23],[73,22,70,25],[74,8,71,6,"console"],[74,15,71,13],[74,16,71,14,"error"],[74,21,71,19],[74,22,71,20],[74,48,71,46],[74,50,71,48,"error"],[74,55,71,53],[74,56,71,54],[75,8,72,6],[75,14,72,12,"error"],[75,19,72,17],[76,6,73,4],[77,4,74,2],[77,5,74,3],[78,4,76,2],[78,10,76,8,"removeFromCart"],[78,24,76,22],[78,27,76,25],[78,33,76,32,"medicineId"],[78,43,76,50],[78,47,76,55],[79,6,77,4],[79,10,77,8],[80,8,78,6],[80,14,78,12,"cartAPI"],[80,26,78,19],[80,27,78,19,"cartAPI"],[80,34,78,19],[80,35,78,20,"remove"],[80,41,78,26],[80,42,78,27,"medicineId"],[80,52,78,37],[80,53,78,38],[81,8,79,6],[81,14,79,12,"loadCart"],[81,22,79,20],[81,23,79,21],[81,24,79,22],[82,8,80,6],[82,15,80,13],[82,19,80,17],[83,6,81,4],[83,7,81,5],[83,8,81,6],[83,15,81,13,"error"],[83,20,81,23],[83,22,81,25],[84,8,82,6,"console"],[84,15,82,13],[84,16,82,14,"error"],[84,21,82,19],[84,22,82,20],[84,49,82,47],[84,51,82,49,"error"],[84,56,82,54],[84,57,82,55],[85,8,83,6],[85,14,83,12,"error"],[85,19,83,17],[86,6,84,4],[87,4,85,2],[87,5,85,3],[88,4,87,2],[88,10,87,8,"getItemQuantity"],[88,25,87,23],[88,28,87,27,"medicineId"],[88,38,87,45],[88,42,87,58],[89,6,88,4],[89,10,88,8],[89,11,88,9,"cart"],[89,15,88,13],[89,19,88,17],[89,20,88,18,"cart"],[89,24,88,22],[89,25,88,23,"items"],[89,30,88,28],[89,32,88,30],[89,39,88,37],[89,40,88,38],[90,6,89,4],[90,12,89,10,"item"],[90,16,89,14],[90,19,89,17,"cart"],[90,23,89,21],[90,24,89,22,"items"],[90,29,89,27],[90,30,89,28,"find"],[90,34,89,32],[90,35,89,33,"item"],[90,39,89,37],[90,43,89,41,"item"],[90,47,89,45],[90,48,89,46,"medicine_id"],[90,59,89,57],[90,64,89,62,"medicineId"],[90,74,89,72],[90,75,89,73],[91,6,90,4],[91,13,90,11,"item"],[91,17,90,15],[91,20,90,18,"item"],[91,24,90,22],[91,25,90,23,"quantity"],[91,33,90,31],[91,36,90,34],[91,37,90,35],[92,4,91,2],[92,5,91,3],[93,4,93,2],[93,8,93,2,"useEffect"],[93,14,93,11],[93,15,93,11,"useEffect"],[93,24,93,11],[93,26,93,12],[93,32,93,18],[94,6,94,4,"loadCart"],[94,14,94,12],[94,15,94,13],[94,16,94,14],[95,4,95,2],[95,5,95,3],[95,7,95,5],[95,8,95,6,"loadCart"],[95,16,95,14],[95,17,95,15],[95,18,95,16],[96,4,97,2],[96,11,97,9],[97,6,98,4,"cart"],[97,10,98,8],[98,6,99,4,"loading"],[98,13,99,11],[99,6,100,4,"cartItemCount"],[99,19,100,17],[100,6,101,4,"loadCart"],[100,14,101,12],[101,6,102,4,"addToCart"],[101,15,102,13],[102,6,103,4,"updateQuantity"],[102,20,103,18],[103,6,104,4,"removeFromCart"],[103,20,104,18],[104,6,105,4,"getItemQuantity"],[105,4,106,2],[105,5,106,3],[106,2,107,0],[106,3,107,1],[107,0,107,2],[107,3]],"functionMap":{"names":["<global>","useCart","loadCart","cartData.items.reduce$argument_0","useFocusEffect$argument_0","useEffect$argument_0","cartEvents.subscribe$argument_0","addToCart","updateQuantity","removeFromCart","getItemQuantity","cart.items.find$argument_0"],"mappings":"AAA;uBCM;+BCK;iDCa,kCD;GDY;gBGI;KHE;YII;6CCC;KDE;GJE;oBME;GNS;yBOE;GPS;yBQE;GRS;0BSE;iCCE,uCD;GTE;YIE;GJE;CDY"},"hasCjsExports":false},"type":"js/module"}]}